<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Thêm giảm giá</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/2643e782c1.js" crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- css property -->
    <link rel="stylesheet" href="../../../style/index.css">
    <link rel="stylesheet" href="../../../style/admin/general-form-admin.css">
    <link rel="stylesheet" href="../../../style/admin/style-form/general-form.css">
    <style>
        .remove-product-btn {
            height: 40px;
            border: none;
            border-radius: 5px;
            background-color: var(--sub-cta-button);
            color: white;
            width: 100%;
        }

        .add-product-btn {
            margin-top: 10px;
            height: 40px;
            border: none;
            border-radius: 5px;
            background-color: var(--sub-cta-button);
            color: white;
        }
    </style>
</head>
<body>
<!-- Gray overlay -->
<div id="overlay" class="hidden"></div>
<!-- Form container -->
<div id="formContainer" class="vh-100 align-content-center" style="width: 700px; left: calc(50% - 350px);">
    <!--enter code -->
    <form class="form-container">
        <div class="row pt-3">
            <div class="col"><h2 class="style-big-title">Thêm giảm giá</h2></div>
        </div>
        <div class="row pt-2">
            <div class="col"><span class="style-title">Tên giảm giá<span class="text-danger"> * </span></span></div>
        </div>
        <div class="row pt-2">
            <div class="col p-0"><input type="text" class="w-100 style-input" placeholder="Nhập tên giảm giá">
            </div>
        </div>
        <!-- mô tả -->
        <div class="row pt-3">
            <div class="col"><span class="style-title">Mô tả giảm giá<span class="text-danger"> * </span></span></div>
        </div>
        <div class="row pt-2">
            <div class="col p-0"><textarea class="w-100 style-area" placeholder="Nhập mô tả giảm giá"></textarea>
            </div>
        </div>
        
        <!-- chọn cách thức giảm giá -->
        <div class="row pt-3">
            <div class="col"><span class="style-title">Phương thức giảm giá<span class="text-danger"> * </span></span></div>
        </div>
        <div class="row pt-2">
            <div class="col text-end">
                <label>Áp dụng trên toàn bộ sản phẩm</label>
                <input type="radio" name="chooseDiscount" value="1" onclick="showDiscount('chooseGlobal');">
            </div>
            <div class="col">
                <label>Áp dụng trên từng sản phẩm</label>
                <input type="radio" name="chooseDiscount" value="2" onclick="showDiscount('chooseIndividual');">
            </div>
        </div>
        <!-- giảm giá tất cả sp -->
        <div class="row pt-3 d-none chooseGlobal">
            <div class="col"><span class="style-title">Giảm giá</span></div>
        </div>
        <div class="row pt-2 d-none chooseGlobal">
            <div class="col pe-1">
                <label class="style-label">Phần trăm giảm giá (%)<span class="text-danger"> * </span></label>
                <input type="number" class="w-100 style-input" placeholder="Nhập phần trăm giảm giá (%)">
            </div>
            <div class="col p-0">
                <label class="style-label">Giới hạn số lượng sản phẩm giảm giá</label>
                <input type="number" class="w-100 style-input" placeholder="Nhập số lượng giới hạn">
            </div>
        </div>
        <!-- giảm giá từng sp -->
        <div class="row pt-3 d-none chooseIndividual">
            <div class="col"><span class="style-title">Giảm giá</span></div>
        </div>
        <div class="row pt-2 d-none chooseIndividual">
            <div class="col p-0">
                <!-- Sản phẩm -->
                <div id="discounts">
                    <div class="form-group discount-row row mb-2">
                        <div class="col pe-0">
                            <label class="style-label">Mã sản phẩm<span class="text-danger"> * </span></label>
                            <input type="text" class="style-input" placeholder="Nhập mã sản phẩm">
                        </div>
                        <div class="col pe-0">
                            <label class="style-label">Phần trăm giảm (%)<span class="text-danger"> * </span></label>
                            <input type="number" class="w-100 style-input" min="1" max="100" placeholder="Nhập % giảm" required>
                        </div>
                        <div class="col">
                            <label class="style-label">Số lượng giới hạn</label>
                            <input type="number" class="w-100 style-input" min="1" placeholder="Nhập số lượng">
                        </div>
                        <div class="col-2">
                            <button type="button" class="remove-product-btn" style="margin-top: 27px" onclick="removeProduct(this)">Xóa</button>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="add-product-btn px-2" onclick="addProduct()">Thêm Sản Phẩm</button>
                </div>
            </div>
        </div>
        
        <!-- ngày tạo -->
        <div class="row pt-3">
            <div class="col"><span class="style-title">Ngày tạo giảm giá<span class="text-danger"> * </span></span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col p-0"><input type="date" class="w-100 style-input"></div>
        </div>
        <!-- kết thúc -->
        <div class="row pt-3">
            <div class="col"><span class="style-title">Ngày kết thúc giảm giá</span></div>
        </div>
        <div class="row pt-2">
            <div class="col p-0"><input type="date" class="w-100 style-input"></div>
        </div>
        
        <div class="row pt-4 pb-4">
            <div class="col">
                <button id="cancelBtn" class="style-cancel-btn">Hủy</button>
            </div>
            <div class="col">
                <button class="style-button">Thêm giảm giá</button>
            </div>
        </div>
    </form>
</div>

<script>
    function addProduct() {
        const discountRow = document.querySelector('.discount-row');
        const newRow = discountRow.cloneNode(true);
        newRow.querySelectorAll('input').forEach(input => input.value = '');
        document.getElementById('discounts').appendChild(newRow);
    }

    function removeProduct(button) {
        const row = button.parentElement.parentElement;
        if (document.querySelectorAll('.discount-row').length > 1) {
            row.remove();
        } else {
            alert("Phải có ít nhất một sản phẩm!");
        }
    }
    
    function showDiscount(choose) {
        switch (choose) {
            case 'chooseGlobal':
                $('.chooseGlobal').removeClass('d-none');
                $('.chooseIndividual').addClass('d-none');
                break;
            case 'chooseIndividual':
                $('.chooseIndividual').removeClass('d-none');
                $('.chooseGlobal').addClass('d-none');
                break;
        }
    }
</script>
</body>
</html>
